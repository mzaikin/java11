<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Appendix&nbsp;1.&nbsp;Additional materials</title><link rel="stylesheet" type="text/css" href="ocpjd11-upgrade-guide.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Exam 1Z0-817: Upgrade OCP Java 6, 7 &amp; 8 to Java SE 11 Developer Study Guide"><link rel="up" href="pt02.html" title="Part&nbsp;II.&nbsp;Appendixes"><link rel="prev" href="pt02.html" title="Part&nbsp;II.&nbsp;Appendixes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix&nbsp;1.&nbsp;Additional materials</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pt02.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;II.&nbsp;Appendixes</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h2 class="title"><a name="app1"></a>Appendix&nbsp;1.&nbsp;Additional materials</h2></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="a1s1"></a>1.1.&nbsp;How to build JDK module graph</h2></div></div></div>
				
				<p>
					Create <code class="code">module-info.java</code> in some directory.
					</p><pre class="programlisting">

module viz {
    requires java.se;
}

					</pre><p>
				</p>
				<p>
					Create class <code class="code">app.App.java</code>  (in the <code class="code">app</code> sub-directory)
					</p><pre class="programlisting">

package app;

import java.lang.module.ModuleDescriptor.Requires;
import java.util.HashSet;
import java.util.Set;

/**
 * This is the main application to generate graph code.
 * 
 * @author Mikalai Zaikin (mzaikin@gmail.com)
 */
public class App {

    public static void main(String[] args) {
        App app = new App();
        
        var edges = app.getEdges();
        var modules = app.getModules();
        
        // System.out.println(modules);
        
        StringBuffer sb = new StringBuffer("digraph Java11 {\n");
        sb.append("    ratio = fill;\n");
        sb.append("    node [style=filled];\n");        
        edges.forEach((e) -&gt; {
            sb.append(String.format("    \"%s\" -&gt; \"%s\";%n", new Object[]{e.getFrom(), e.getTo()}));
        });
        modules.forEach((m) -&gt; {
            sb.append("\""+m+"\" [color=\"" + (m.startsWith("jdk") ? "darkseagreen" : "cyan") + "\"];\n");
        });
        sb.append("}");
        System.out.println(sb);
        
    }
    
    private HashSet&lt;Edge&gt; getEdges() {
        var edges = new HashSet&lt;Edge&gt;();
        Set&lt;Module&gt; modules = ModuleLayer.boot().modules();
        modules.forEach((module) -&gt; {
            String moduleName = module.getName();
            if (!("viz".equals(moduleName))) {
                Set&lt;Requires&gt; requires = module.getDescriptor().requires();
                requires.forEach((require) -&gt; {
                    edges.add(new Edge(moduleName, require.name()));
                });
            }
        });
        return edges;
    }
    
    private HashSet&lt;String&gt; getModules() {
        var mods = new HashSet&lt;String&gt;();
        Set&lt;Module&gt; modules = ModuleLayer.boot().modules();
        for (Module module : modules) {
            String moduleName = module.getName();
            if ("viz".equals(moduleName)) continue;
            mods.add(moduleName);
        }
        return mods;
    }
}

					</pre><p>
				</p>
				<p>
					Create class <code class="code">app.Edge.java</code> (in the <code class="code">app</code> sub-directory)
					</p><pre class="programlisting">

package app;

import java.util.Objects;

/**
 * This is the class to encapsulate edge of the graph.
 * 
 * @author Mikalai Zaikin (mzaikin@gmail.com)
 */
public class Edge {

    private String from;
    private String to;

    public Edge(String from, String to) {
        this.from = from;
        this.to = to;
    }

    public String getFrom() {
        return from;
    }

    public void setFrom(String from) {
        this.from = from;
    }

    public String getTo() {
        return to;
    }

    public void setTo(String to) {
        this.to = to;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) {
            return true;
        }
        if (o == null || getClass() != o.getClass()) {
            return false;
        }
        Edge edge = (Edge) o;
        return Objects.equals(from, edge.from)
                &amp;&amp; Objects.equals(to, edge.to);
    }

    @Override
    public int hashCode() {
        return Objects.hash(from, to);
    }

    @Override
    public String toString() {
        return from + "-&gt;" + to;
    }
}

					</pre><p>					
				</p>
				<p>
					Run the code from the directory where <code class="code">module-info.class</code> is located:
					</p><pre class="programlisting">

C:\USERS\IBM_ADMIN\DOCUMENTS\NETBEANSPROJECTS\VIZ\BUILD\MODULES
&#9492;&#9472;&#9472;&#9472;viz
    &#9474;   module-info.class
    &#9474;
    &#9492;&#9472;&#9472;&#9472;app
            App.class
            Edge.class

					</pre><p>
					</p><pre class="programlisting">
"C:\Program Files\Java\jdk-11.0.2\bin\java.exe" --module-path . -m viz/app.App
					</pre><p> 
				</p>
				<p>
					There should be similar output:
					</p><pre class="programlisting">

digraph Java11 {
    ratio = fill;
    node [style=filled];
    "java.management.rmi" -&gt; "java.base";
    "java.sql" -&gt; "java.xml";
    "java.se" -&gt; "java.management.rmi";
    "java.xml.crypto" -&gt; "java.base";
    "java.se" -&gt; "java.scripting";
    "java.sql" -&gt; "java.base";
    "jdk.scripting.nashorn" -&gt; "java.base";
    "jdk.security.jgss" -&gt; "java.security.sasl";
    "java.smartcardio" -&gt; "java.base";
    "jdk.naming.dns" -&gt; "java.naming";
    "java.xml.crypto" -&gt; "java.xml";
    "java.prefs" -&gt; "java.base";
    "java.se" -&gt; "java.rmi";
    "java.sql.rowset" -&gt; "java.base";
    "java.compiler" -&gt; "java.base";
    "jdk.localedata" -&gt; "java.base";
    "jdk.security.auth" -&gt; "java.security.jgss";
    "jdk.naming.rmi" -&gt; "java.rmi";
    "java.desktop" -&gt; "java.prefs";
    "java.prefs" -&gt; "java.xml";
    "java.rmi" -&gt; "java.logging";
    "jdk.security.jgss" -&gt; "java.logging";
    "jdk.jdeps" -&gt; "jdk.compiler";
    "java.se" -&gt; "java.instrument";
    "jdk.accessibility" -&gt; "java.desktop";
    "jdk.jfr" -&gt; "java.base";
    "jdk.accessibility" -&gt; "java.base";
    "java.logging" -&gt; "java.base";
    "jdk.jdeps" -&gt; "java.base";
    "jdk.naming.rmi" -&gt; "java.naming";
    "jdk.jlink" -&gt; "jdk.jdeps";
    "java.se" -&gt; "java.base";
    "jdk.unsupported.desktop" -&gt; "java.desktop";
    "jdk.crypto.cryptoki" -&gt; "jdk.crypto.ec";
    "jdk.security.auth" -&gt; "java.base";
    "java.sql.rowset" -&gt; "java.sql";
    "jdk.compiler" -&gt; "java.base";
    "jdk.jdeps" -&gt; "java.compiler";
    "jdk.internal.opt" -&gt; "java.base";
    "jdk.naming.dns" -&gt; "java.base";
    "java.rmi" -&gt; "java.base";
    "jdk.management.jfr" -&gt; "java.base";
    "jdk.security.jgss" -&gt; "java.security.jgss";
    "java.sql" -&gt; "java.transaction.xa";
    "java.scripting" -&gt; "java.base";
    "java.management" -&gt; "java.base";
    "jdk.dynalink" -&gt; "java.logging";
    "jdk.management.jfr" -&gt; "java.management";
    "java.se" -&gt; "java.sql";
    "java.se" -&gt; "java.transaction.xa";
    "jdk.javadoc" -&gt; "jdk.compiler";
    "jdk.scripting.nashorn" -&gt; "java.scripting";
    "java.se" -&gt; "java.logging";
    "jdk.crypto.mscapi" -&gt; "java.base";
    "java.se" -&gt; "java.compiler";
    "jdk.jlink" -&gt; "jdk.internal.opt";
    "java.sql" -&gt; "java.logging";
    "java.security.jgss" -&gt; "java.naming";
    "jdk.scripting.nashorn" -&gt; "java.logging";
    "jdk.charsets" -&gt; "java.base";
    "java.desktop" -&gt; "java.datatransfer";
    "jdk.crypto.ec" -&gt; "java.base";
    "java.xml.crypto" -&gt; "java.logging";
    "java.sql.rowset" -&gt; "java.logging";
    "jdk.management.jfr" -&gt; "jdk.jfr";
    "jdk.naming.rmi" -&gt; "java.base";
    "jdk.management.jfr" -&gt; "jdk.management";
    "jdk.jartool" -&gt; "java.base";
    "java.naming" -&gt; "java.base";
    "java.transaction.xa" -&gt; "java.base";
    "java.se" -&gt; "java.xml";
    "jdk.javadoc" -&gt; "java.xml";
    "java.datatransfer" -&gt; "java.base";
    "java.se" -&gt; "java.desktop";
    "jdk.management" -&gt; "java.base";
    "jdk.compiler" -&gt; "java.compiler";
    "jdk.crypto.cryptoki" -&gt; "java.base";
    "java.security.sasl" -&gt; "java.base";
    "java.se" -&gt; "java.security.sasl";
    "java.se" -&gt; "java.prefs";
    "java.security.jgss" -&gt; "java.base";
    "jdk.security.auth" -&gt; "java.naming";
    "jdk.jlink" -&gt; "java.base";
    "jdk.zipfs" -&gt; "java.base";
    "java.net.http" -&gt; "java.base";
    "java.desktop" -&gt; "java.xml";
    "java.se" -&gt; "java.sql.rowset";
    "java.management.rmi" -&gt; "java.naming";
    "jdk.security.jgss" -&gt; "java.base";
    "java.desktop" -&gt; "java.base";
    "jdk.scripting.nashorn" -&gt; "jdk.dynalink";
    "jdk.unsupported.desktop" -&gt; "java.base";
    "jdk.management" -&gt; "java.management";
    "java.se" -&gt; "java.management";
    "java.instrument" -&gt; "java.base";
    "java.naming" -&gt; "java.security.sasl";
    "java.xml" -&gt; "java.base";
    "jdk.javadoc" -&gt; "java.base";
    "java.sql.rowset" -&gt; "java.naming";
    "java.se" -&gt; "java.xml.crypto";
    "jdk.javadoc" -&gt; "java.compiler";
    "java.se" -&gt; "java.datatransfer";
    "jdk.dynalink" -&gt; "java.base";
    "java.management.rmi" -&gt; "java.management";
    "java.security.sasl" -&gt; "java.logging";
    "java.se" -&gt; "java.security.jgss";
    "java.se" -&gt; "java.naming";
    "java.se" -&gt; "java.net.http";
    "java.management.rmi" -&gt; "java.rmi";
"jdk.management.jfr" [color="darkseagreen"];
"java.sql" [color="cyan"];
"java.rmi" [color="cyan"];
"jdk.charsets" [color="darkseagreen"];
"java.transaction.xa" [color="cyan"];
"java.xml.crypto" [color="cyan"];
"java.logging" [color="cyan"];
"java.xml" [color="cyan"];
"jdk.jfr" [color="darkseagreen"];
"java.datatransfer" [color="cyan"];
"jdk.crypto.cryptoki" [color="darkseagreen"];
"java.naming" [color="cyan"];
"java.desktop" [color="cyan"];
"java.se" [color="cyan"];
"java.prefs" [color="cyan"];
"java.net.http" [color="cyan"];
"jdk.compiler" [color="darkseagreen"];
"jdk.naming.rmi" [color="darkseagreen"];
"jdk.internal.opt" [color="darkseagreen"];
"java.security.sasl" [color="cyan"];
"jdk.zipfs" [color="darkseagreen"];
"java.base" [color="cyan"];
"jdk.crypto.ec" [color="darkseagreen"];
"jdk.javadoc" [color="darkseagreen"];
"jdk.crypto.mscapi" [color="darkseagreen"];
"java.management" [color="cyan"];
"java.sql.rowset" [color="cyan"];
"jdk.jlink" [color="darkseagreen"];
"java.smartcardio" [color="cyan"];
"jdk.scripting.nashorn" [color="darkseagreen"];
"java.instrument" [color="cyan"];
"java.security.jgss" [color="cyan"];
"jdk.management" [color="darkseagreen"];
"java.compiler" [color="cyan"];
"jdk.security.auth" [color="darkseagreen"];
"java.scripting" [color="cyan"];
"jdk.dynalink" [color="darkseagreen"];
"jdk.unsupported.desktop" [color="darkseagreen"];
"jdk.jdeps" [color="darkseagreen"];
"jdk.accessibility" [color="darkseagreen"];
"jdk.jartool" [color="darkseagreen"];
"java.management.rmi" [color="cyan"];
"jdk.naming.dns" [color="darkseagreen"];
"jdk.security.jgss" [color="darkseagreen"];
"jdk.localedata" [color="darkseagreen"];
}

					</pre><p>
				</p>
				<p>
					Use this graph text definition to generate image at 
					<a class="ulink" href="http://www.webgraphviz.com" target="_top">http://www.webgraphviz.com</a>
					or
					<a class="ulink" href="http://viz-js.com" target="_top">http://viz-js.com</a>.					
				</p>
				<p>
					The result will look as follows:
					</p><div class="figure"><a name="d5e3920"></a><p class="title"><b>Figure&nbsp;1.1.&nbsp;Java SE 11 Module Graph</b></p><div class="figure-contents">
  						
  						<div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td><img src="images/java11-graph.gif" width="100%" alt="Java SE 11 Module Graph"></td></tr></table></div>
					</div></div><p><br class="figure-break">
				</p>
			</div>
		</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pt02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="pt02.html">Up</a></td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;II.&nbsp;Appendixes&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>